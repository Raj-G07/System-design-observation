# üß© Template Method Design Pattern

## üìò Overview
!!! note ""
    The **Template Method Design Pattern** is a **behavioral pattern** that defines the  **skeleton of an algorithm** in a base class but lets **subclasses override specific steps** without changing the algorithm's structure.

    > üß† It allows you to reuse the high-level logic while giving flexibility for the low-level steps.

---

## üí° Real-World Analogy

Think of a **coffee machine** ‚òï.  
Every coffee follows the same **sequence of steps**:  
1Ô∏è‚É£ Boil water  
2Ô∏è‚É£ Brew the drink  
3Ô∏è‚É£ Pour in cup  
4Ô∏è‚É£ Add condiments  

Different drinks (like Tea or Coffee) may **change the brewing step**, but the overall algorithm remains the same.

---

## üèóÔ∏è Structure

- **Abstract Class** ‚Äî defines the template method and abstract steps.
- **Concrete Classes** ‚Äî implement the specific variations of steps.
- **Template Method** ‚Äî defines the fixed sequence of operations.

---

## üß≠ UML Class Diagram
!!! info ""
    ```mermaid
    classDiagram
        class AbstractClass {
            + templateMethod() void
            + primitiveOperation1()*
            + primitiveOperation2()*
        }
    
        class ConcreteClassA {
            + primitiveOperation1() void
            + primitiveOperation2() void
        }
    
        class ConcreteClassB {
            + primitiveOperation1() void
            + primitiveOperation2() void
        }
    
        AbstractClass <|-- ConcreteClassA
        AbstractClass <|-- ConcreteClassB
    ```

---

## üíª C++ Implementation

```cpp title="template-method-design.cpp" linenums="1"
#include <iostream>
using namespace std;

class Beverage {
public:
    // Template method (final sequence)
    void prepareRecipe() {
        boilWater();
        brew();
        pourInCup();
        addCondiments();
    }

protected:
    void boilWater() {
        cout << "Boiling water...\n";
    }

    void pourInCup() {
        cout << "Pouring into cup...\n";
    }

    // Abstract steps
    virtual void brew() = 0;
    virtual void addCondiments() = 0;
};

class Tea : public Beverage {
protected:
    void brew() override {
        cout << "Steeping the tea...\n";
    }
    void addCondiments() override {
        cout << "Adding lemon...\n";
    }
};

class Coffee : public Beverage {
protected:
    void brew() override {
        cout << "Dripping coffee through filter...\n";
    }
    void addCondiments() override {
        cout << "Adding sugar and milk...\n";
    }
};

int main() {
    cout << "--- Making Tea ---\n";
    Tea tea;
    tea.prepareRecipe();

    cout << "\n--- Making Coffee ---\n";
    Coffee coffee;
    coffee.prepareRecipe();

    return 0;
}
```

---

## üß† Output

```sql linenums="1"
--- Making Tea ---
Boiling water...
Steeping the tea...
Pouring into cup...
Adding lemon...

--- Making Coffee ---
Boiling water...
Dripping coffee through filter...
Pouring into cup...
Adding sugar and milk...
```

---

## ‚öôÔ∏è Key Concepts

!!! details ""
    | Concept                  | Description                                  |
    | ------------------------ | -------------------------------------------- |
    | **Template Method**      | Defines fixed algorithm structure            |
    | **Primitive Operations** | Steps defined by subclasses                  |
    | **Hooks (optional)**     | Default methods that subclasses may override |
    | **Concrete Classes**     | Provide specific implementations             |

---

## ‚úÖ Advantages
!!! success ""
    - Promotes code reuse and avoids duplication
    - Makes algorithms easily customizable
    - Follows Open/Closed Principle ‚Äî algorithm fixed, steps extendible

## ‚ö†Ô∏è Drawbacks
!!! warning ""
    - Tight coupling between base class and subclasses
    - Harder to maintain when too many steps exist

## üß∞ When to Use
- When several classes share the same algorithm but differ in specific steps
- When behavior should be standardized across subclasses
- When you want to enforce a sequence of method calls

## üîó References
???+ link 
     - [Refactoring Guru ‚Äì Template Method Pattern](https://refactoring.guru/design-patterns/template-method)
     - [GeeksforGeeks ‚Äì Template Method Design Pattern in C++](https://www.geeksforgeeks.org/system-design/template-method-design-pattern/)
     - [SourceMaking ‚Äì Template Method](https://sourcemaking.com/design_patterns/template_method)
